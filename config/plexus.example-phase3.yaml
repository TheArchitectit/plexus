# Plexus Configuration Example - Phase 3
# Demonstrates model aliasing and routing capabilities

server:
  port: 4000
  host: "0.0.0.0"

logging:
  level: "info"

# Multiple provider configurations
providers:
  - name: "openai"
    enabled: true
    apiTypes: ["chat"]
    baseUrls:
      chat: "https://api.openai.com/v1/chat/completions"
    auth:
      type: "bearer"
      apiKeyEnv: "OPENAI_API_KEY"
    models:
      - "gpt-4o"
      - "gpt-4o-mini"
      - "gpt-4-turbo"

  - name: "azure-openai"
    enabled: true
    apiTypes: ["chat"]
    baseUrls:
      chat: "https://my-resource.openai.azure.com/openai/deployments/gpt4o/chat/completions?api-version=2024-02-01"
    auth:
      type: "x-api-key"
      apiKeyEnv: "AZURE_OPENAI_KEY"
    models:
      - "gpt-4o"

  - name: "synthetic"
    enabled: true
    apiTypes: ["chat"]
    baseUrls:
      chat: "https://api.synthetic.new/openai/v1/chat/completions"
    auth:
      type: "bearer"
      apiKeyEnv: "SYNTHETIC_API_KEY"
    models:
      - "hf:MiniMaxAI/MiniMax-M2.1"

# Model aliases - decouple client-facing names from backend implementations
models:
  # Fast, cost-effective model
  - alias: "fast"
    description: "Fast, cost-effective model for simple tasks"
    additionalAliases:
      - "quick"
      - "cheap"
    targets:
      - provider: "openai"
        model: "gpt-4o-mini"
    selector: "random"

  # High-quality model with load balancing
  - alias: "smart"
    description: "High-quality model for complex tasks"
    additionalAliases:
      - "best"
      - "flagship"
    targets:
      - provider: "openai"
        model: "gpt-4o"
        weight: 70
      - provider: "azure-openai"
        model: "gpt-4o"
        weight: 30
    selector: "random"

  # Cost-balanced with fallback
  - alias: "balanced"
    description: "Cost-balanced model with fallback"
    targets:
      - provider: "openai"
        model: "gpt-4-turbo"
      - provider: "openai"
        model: "gpt-4o"
    selector: "in_order"

  # Alternative provider
  - alias: "experimental"
    description: "Experimental model from Synthetic"
    targets:
      - provider: "synthetic"
        model: "hf:MiniMaxAI/MiniMax-M2.1"
    selector: "random"

# API Keys for client authentication
apiKeys:
  - name: "default"
    secret: "${PLEXUS_API_KEY}"
    enabled: true
