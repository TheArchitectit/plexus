# Plexus Configuration Example - Phase 4
# Demonstrates Anthropic Messages API support and cross-provider capabilities

server:
  port: 4000
  host: "0.0.0.0"

logging:
  level: "info"

# Multiple provider configurations with different API types
providers:
  - name: "openai"
    enabled: true
    apiTypes: ["chat"]          # Speaks OpenAI chat/completions
    baseUrls:
      chat: "https://api.openai.com/v1/chat/completions"
    auth:
      type: "bearer"
      apiKeyEnv: "OPENAI_API_KEY"
    models:
      - "gpt-4o"
      - "gpt-4o-mini"

  - name: "anthropic"
    enabled: true
    apiTypes: ["messages"]      # Speaks Anthropic messages
    baseUrls:
      messages: "https://api.anthropic.com/v1/messages"
    auth:
      type: "x-api-key"
      apiKeyEnv: "ANTHROPIC_API_KEY"
    customHeaders:
      anthropic-version: "2023-06-01"
    models:
      - "claude-sonnet-4-20250514"
      - "claude-3-5-sonnet-20241022"
      - "claude-3-5-haiku-20241022"

# Model aliases demonstrating cross-provider routing
models:
  # Fast model - uses OpenAI
  - alias: "fast"
    description: "Fast, cost-effective model"
    targets:
      - provider: "openai"
        model: "gpt-4o-mini"
    selector: "random"

  # Claude Sonnet alias
  - alias: "sonnet"
    description: "Claude Sonnet 4"
    targets:
      - provider: "anthropic"
        model: "claude-sonnet-4-20250514"
    selector: "random"

  # Claude Haiku alias
  - alias: "haiku"
    description: "Claude 3.5 Haiku"
    targets:
      - provider: "anthropic"
        model: "claude-3-5-haiku-20241022"
    selector: "random"

  # Cross-provider alias (can route to either OpenAI or Anthropic)
  # Note: Phase 4 implements passthrough mode - full transformation in future phase
  - alias: "smart"
    description: "High-quality model - can route to either provider"
    targets:
      - provider: "openai"
        model: "gpt-4o"
      - provider: "anthropic"
        model: "claude-sonnet-4-20250514"
    selector: "random"
    apiMatch: true  # Prefer targets matching incoming API type

# API Keys for client authentication
apiKeys:
  - name: "default"
    secret: "${PLEXUS_API_KEY}"
    enabled: true
